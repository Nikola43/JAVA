PURGE RECYCLEBIN;
DROP TABLE CENTROS CASCADE CONSTRAINTS;
CREATE TABLE CENTROS(
  COD_CE		NUMBER(2)		PRIMARY KEY,
  DIRECTOR_CE	NUMBER(6),
  NOMB_CE		VARCHAR2(30)	NOT NULL,
  DIRECC_CE		VARCHAR2(50)	NOT NULL,
  POBLAC_CE		VARCHAR2(15)	NOT NULL
);


DROP TABLE DEPARTAMENTOS CASCADE CONSTRAINTS;
CREATE TABLE DEPARTAMENTOS(
  COD_DE		NUMBER(3)		PRIMARY KEY,
  DIRECTOR_DE	NUMBER(6),
  DEPTJEFE_DE	NUMBER(3),
  CENTRO_DE		NUMBER(2)		NOT NULL,
  NOMB_DE		VARCHAR2(40)	NOT NULL,
  PRESUP_DE		NUMBER(11)		NOT NULL,
  TIPODIR_DE	CHAR(1)			NOT NULL
);


DROP TABLE EMPLEADOS CASCADE CONSTRAINTS;
CREATE TABLE EMPLEADOS(
  COD_EM		NUMBER(6)	PRIMARY KEY,
  DEPT_EM		NUMBER(3),
  EXTTEL_EM		CHAR(9),
  FECINC_EM		DATE,
  FECNAC_EM		DATE,
  DNI_EM		VARCHAR2(9)		UNIQUE,
  NOMB_EM		VARCHAR2(40) 	NOT NULL,
  NUMHIJ_EM		NUMBER(2)		NOT NULL,
  SALARIO_EM	NUMBER(9) 		NOT NULL,
  COMISION_EM 	NUMBER(9)
);


DROP TABLE HIJOS CASCADE CONSTRAINTS;
CREATE TABLE HIJOS(
  PADRE_HI	NUMBER(6),
  NUMHIJ_HI	NUMBER(2),
  FECNAC_HI	DATE,
  NOMB_HI	VARCHAR2(40),
  PRIMARY KEY (PADRE_HI, NUMHIJ_HI)
);


REM *************** INSERCIÓN DE DATOS EN LAS TABLAS*************

ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';
SET LINESIZE 130
SET PAGESIZE 40

REM ********** TABLA CENTROS: *************

INSERT INTO CENTROS VALUES (10, 1, 'Direccion', 'Av. Constitucion 88', 'Madrid');
INSERT INTO CENTROS VALUES (20, 6, 'Fabrica' , 'Pol. Ind. Don Manue', 'Huelva');
INSERT INTO CENTROS VALUES (30, 5, 'Oficinas', 'Jabugo 2'           , 'Sevilla');

COMMIT;

REM ********** TABLA DEPARTAMENTOS: *************

INSERT INTO DEPARTAMENTOS VALUES (100, 5,   NULL , 30, 'Administracion'  ,  14000000, 'P');
INSERT INTO DEPARTAMENTOS VALUES (200, 1,   NULL , 10, 'Informatica'        ,  26000000, 'P');
INSERT INTO DEPARTAMENTOS VALUES (300, 2, 200, 10, 'Investigacion'   ,  25000000, 'P');
INSERT INTO DEPARTAMENTOS VALUES (400, 6,   NULL , 20, 'Jefatura',   6200000, 'F');
INSERT INTO DEPARTAMENTOS VALUES (500, 9, 400, 20, 'Produccion'      , 108000000, 'P');
INSERT INTO DEPARTAMENTOS VALUES (600, 3, 100, 30, 'Ventas'          ,  13500000, 'F');

COMMIT;

REM ********** TABLA EMPLEADOS: *************

INSERT INTO EMPLEADOS VALUES ( 5,100,  1239, SYSDATE,'15/11/1986','55645991T','Arias Grillo, Jairo                ', 1, 6200000,null);
INSERT INTO EMPLEADOS VALUES ( 7,500,  NULL, SYSDATE,'05/08/1995','54652636D','Arnaldos Valle, Javier             ', 0, 1600000,null);
INSERT INTO EMPLEADOS VALUES ( 6,400, 23838, SYSDATE,'12/04/1997','71106202D','Avila Ferrete, Raquel Maria        ', 0, 5000000,null);
INSERT INTO EMPLEADOS VALUES ( 9,500, 12124, SYSDATE,'10/12/1996','56646516D','Cabrera Alava, Kilian              ', 2, 3100000,null);
INSERT INTO EMPLEADOS VALUES ( 2,300,  2233, SYSDATE,'11/01/1996','51506642K','Calderon Diaz, Daniel              ', 0, 4500000,null);
INSERT INTO EMPLEADOS VALUES ( 8,500,  NULL, SYSDATE,'31/10/1995','55980648H','Calvo Jimenez, Alberto             ', 1, 1600000,null);
INSERT INTO EMPLEADOS VALUES ( 3,600,  2133, SYSDATE,'06/12/1995','64555339D','Camacho Lindsey, Daniel            ', 1, 5200000,null);
INSERT INTO EMPLEADOS VALUES (10,500,  NULL, SYSDATE,'19/05/1987','37839343D','Conde Alvarez, Jose Antonio        ', 0, 1300000,null);
INSERT INTO EMPLEADOS VALUES ( 1,200,  1111, SYSDATE,'26/08/1987','76138301V','Del Junco Suarez, Malvina          ', 1, 7200000,null);
INSERT INTO EMPLEADOS VALUES ( 4,600,  3838, SYSDATE,'12/02/1979','67918627L','Fernandez Benito, Javier           ', 0, 3200000,null);
INSERT INTO EMPLEADOS VALUES (15,100,  1239, SYSDATE,'22/04/1993','63453550T','Gallego Carvajal, Juan             ', 0, 6200000,null);
INSERT INTO EMPLEADOS VALUES (17,500,  NULL, SYSDATE,'10/02/1997','90676183D','Garcia Vazquez, Jose Manuel        ', 0, 1600000,null);
INSERT INTO EMPLEADOS VALUES (16,400, 23838, SYSDATE,'19/05/1997','22563618D','Gata Masero, Carlos                ', 0, 5000000,null);
INSERT INTO EMPLEADOS VALUES (19,500, 12124, SYSDATE,'29/06/1997','48443585D','Gil Campos, David                  ', 0, 3100000,null);
INSERT INTO EMPLEADOS VALUES (12,300,  2233, SYSDATE,'04/11/1997','47141695K','Gomez Alba, Gonzalo                ', 0, 4500000,null);
INSERT INTO EMPLEADOS VALUES (18,500,  NULL, SYSDATE,'18/01/1988','76723706H','Jimenez Campos, Alejandro          ', 0, 1600000,null);
INSERT INTO EMPLEADOS VALUES (13,600,  2133, SYSDATE,'01/01/1997','22599031D','Jimenez Garcia, Jose Manuel        ', 0, 5200000,null);
INSERT INTO EMPLEADOS VALUES (20,500,  NULL, SYSDATE,'19/05/1989','76186874D','Leon Vazquez, Rafael               ', 0, 1300000,null);
INSERT INTO EMPLEADOS VALUES (11,200,  1111, SYSDATE,'27/09/1997','76647678V','Marquez Funes, Marcos              ', 0, 7200000,null);
INSERT INTO EMPLEADOS VALUES (14,600,  3838, SYSDATE,'09/01/1989','92369400L','Matito Lozano, Carmen              ', 0, 3200000,null);
INSERT INTO EMPLEADOS VALUES (25,100,  1239, SYSDATE,'16/12/1992','54523162T','Menacho Cabo, Pedro Jose           ', 0, 6200000,null);
INSERT INTO EMPLEADOS VALUES (27,500,  NULL, SYSDATE,'04/12/1996','34287936D','Mendizabal Romero, Luis            ', 0, 1100000,null);
INSERT INTO EMPLEADOS VALUES (26,400, 23838, SYSDATE,'24/01/1979','54015399D','Montane Rodriguez, Francisco Javier', 0, 5000000,null);
INSERT INTO EMPLEADOS VALUES (29,500, 12124, SYSDATE,'06/03/1993','85750368D','Montes Rodriguez, Victor           ', 0, 3100000,null);
INSERT INTO EMPLEADOS VALUES (22,300,  2233, SYSDATE,'30/03/1991','46167848K','Perez Alvarez, Javier              ', 0, 4500000,null);
INSERT INTO EMPLEADOS VALUES (28,500,  NULL, SYSDATE,'19/09/1996','53036510H','Pineda Santos, Jose Manuel         ', 0, 1600000,null);
INSERT INTO EMPLEADOS VALUES (23,600,  2133, SYSDATE,'07/04/1995','65408034D','Pires Barranco, Amador Claudio     ', 0, 5200000,null);
INSERT INTO EMPLEADOS VALUES (30,500,  NULL, SYSDATE,'06/08/1998','27892539D','Pozo Martin, Ismael                ', 0, 1300000,null);
INSERT INTO EMPLEADOS VALUES (21,200,  1111, SYSDATE,'25/12/1994','59126147V','Punta Perez, Gonzalo               ', 0, 9200000,null);
INSERT INTO EMPLEADOS VALUES (24,600,  3838, SYSDATE,'19/05/1992','52426286L','Reina Ramirez, Joaquin Javier      ', 0, 3200000,null);
INSERT INTO EMPLEADOS VALUES (35,100,  1239, SYSDATE,'29/03/1994','27962126T','Rivas Barba, Miguel                ', 0, 6200000,null);
INSERT INTO EMPLEADOS VALUES (31,500,  NULL, SYSDATE,'13/09/1993','22481393D','Rolo Vera, Luis Miguel             ', 0, 1600000,null);
INSERT INTO EMPLEADOS VALUES (32,400, 23838, SYSDATE,'31/03/1995','56373194D','Rufo Rodriguez, Alejandro          ', 0, 5000000,null);
INSERT INTO EMPLEADOS VALUES (33,500, 12124, SYSDATE,'29/12/1997','36090320D','Toscano Fernandez, Juan            ', 0, 3100000,null);
INSERT INTO EMPLEADOS VALUES (34,300,  2233, SYSDATE,'23/07/1997','93739487K','Valverde Gallego, Enrique          ', 0, 4500000,null);
UPDATE EMPLEADOS SET FECINC_EM = ADD_MONTHS(FECINC_EM,-TO_CHAR(FECNAC_EM,'DD'))+TO_CHAR(FECNAC_EM,'DD') WHERE COD_EM <> 1;
COMMIT;


REM ********** TABLA HIJOS: *************

INSERT INTO HIJOS VALUES (8, 1, '14/03/2015','Calvo Rey, Ana');
INSERT INTO HIJOS VALUES (9, 1, '19/05/2016','Cabrera Santos, Elvira');
INSERT INTO HIJOS VALUES (9, 2, '28/07/2016','Cabrera Santos, Kilian');
INSERT INTO HIJOS VALUES (3, 1, '19/05/2015','Camacho Rey, Jesus');
INSERT INTO HIJOS VALUES (5, 1, '06/03/2014','Arias Calvo, Mateo');
INSERT INTO HIJOS VALUES (1, 1, '12/12/2005','Ruiz Del Junco, Juan');

COMMIT;


REM ********** CLAVES AJENAS *************************


ALTER TABLE EMPLEADOS 		ADD CONSTRAINT FK_DEPART FOREIGN KEY (DEPT_EM ) REFERENCES DEPARTAMENTOS ON DELETE CASCADE;
ALTER TABLE CENTROS 		ADD CONSTRAINT FK_DIR FOREIGN KEY (DIRECTOR_CE) REFERENCES EMPLEADOS ON DELETE CASCADE;
ALTER TABLE DEPARTAMENTOS 	ADD CONSTRAINT FK_DIRER FOREIGN KEY (DIRECTOR_DE) REFERENCES EMPLEADOS ON DELETE CASCADE;
ALTER TABLE DEPARTAMENTOS 	ADD CONSTRAINT FK_DEPT FOREIGN KEY (DEPTJEFE_DE) REFERENCES DEPARTAMENTOS ON DELETE CASCADE;
ALTER TABLE DEPARTAMENTOS 	ADD CONSTRAINT FK_CENTRO FOREIGN KEY (CENTRO_DE) REFERENCES CENTROS ON DELETE CASCADE;
ALTER TABLE HIJOS 			ADD CONSTRAINT FK_PADRE FOREIGN KEY (PADRE_HI) REFERENCES EMPLEADOS ON DELETE CASCADE;

COMMIT;



REM ********** FIN *************************
